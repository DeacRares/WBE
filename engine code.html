<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <H1 style="font-size: 2.5em;text-align: center;">Full code of the elo engine</H1>
    <a href = 'index.html'style = "font-size: 1.5em;text-align: center;">get back to main page</a>

    <pre style="font-size: 1.5em;">This script implements a basic Elo rating system for tracking competitors’ performance.

Workflow:
    Load match data from data.json
    Initialize Competitor(weapon ball) objects with base rating (1000)
    Calculate Elo changes using standard formula (K=64)
    Update wins, losses, and ratings after each match
    Sort competitors by rating and display rankings
Notes:
    Caps changes at 64 elo max
    Loss count update has a bug (currently decreases instead of increases)
    Sorting is ascending → higher Elo appears last in list
    If there is a best if 3 match, it counts each game separately</pre>
    <br>
    <pre style="font-size: 1.5em;">
        <hr>
        <hr>
import json

class Competitor:
    def __init__(self,name):
        self.name = name
        self.elo = 1000
        self.wins = 0
        self.loses = 0

    def display(self):
        print(f'{self.name} - elo : {self.elo} - record : {self.wins}{self.loses}')

competitors = {}
data = {}
final_list = []

def elo_change(winner_rating, loser_rating, k=64):
    expected_winner = 1 / (1 + 10 ** ((loser_rating - winner_rating) / 400))
    change = k * (1 - expected_winner)
    return int(round(change))


def init_competitors():
    for value in data.values():
        for ball in value.values():
            if ball not in competitors:
                competitors[ball] = Competitor(ball)

def elo_determination():
    for value in data.values():
        change = elo_change(competitors[value['winner']].elo,competitors[value['loser']].elo)
        competitors[value['winner']].elo +=change
        competitors[value['winner']].wins += 1
        competitors[value['loser']].elo -=change
        competitors[value['loser']].loses -= 1

def sort_the_list():
    lst = []
    for value in competitors.values():
        lst.append(value)
    lst.sort(key=lambda x: x.elo)
    return lst

def display():
    idx = 11
    for ball in final_list:
        print(f'nr {idx} : ',end ='')
        idx -=1
        ball.display()

if __name__=='__main__':

    with open('data.json', 'r') as file:
        data = json.load(file)

    init_competitors()
    elo_determination()
    final_list = sort_the_list()
    display()

</pre>
</body>
</html>